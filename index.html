<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Toma Decretazo</title>
<style type="text/css">
.chart{
	//color: rgb(100,100,255);
	background-color: rgb(150,200,255);
	background-color: lightCyan;
}

</style></head>
<body>
	<script src="http://d3js.org/d3.v3.js"></script>
	<h3>Column Chart</h3>
	<p>A vertical var chart
	</p>
	<script type="text/javascript">

	var dataset = [ 5, 10, 13, 19, 21, 25, 22, 18, 15, 13,
                	11, 12, 15, 20, 18, 17, 16, 18, 23, 25 ];
	
	// Width and height of the chart
	var w = 500;
	var h = 300;
	var barPadding = 3; // space between 2 rects
	var yScale = 4 // multiplier of the ordinate axi

	// Create SVG element 
	var svg = d3.select("body")
	            .append("svg")
	            .attr("class", "chart")
	            .attr("width", w)
	            .attr("height", h);


	/*svg.append("g")
    		.call(d3.svg.axis()
                .scale(xScale)
                .orient("bottom"));
*/
	//svg.axis().scale(yScale).orientation("bottom");

	// Creating the rects, come on!
	svg.selectAll("rect")
	   .data(dataset)
	   .enter()
	   .append("rect")
	   .attr("x", function(d, i) {
    		return i * w / dataset.length ;  //Bar adjust to the chart size
		})
	   .attr("y", function(d){ return h - d * yScale} )
	   .attr("width", w / dataset.length - barPadding)
	   .attr("height", h)
	   .attr("fill","darkRed"); // more red on high values





	var years = [];
	var arrDecrets = [];

   	// TODO: manage the csv file
   	d3.csv("decretos.csv", function(error, data2) {

   		//console.log(data2);
   		

  		data2.forEach(function(d) {
  			arrDecrets.push(d.years);

    		//d.decretos = +d.decretos;
    		console.log(d.decrets);

    	});
    	//writeLabels(data2);
    	arrDecrets.push(69);
    	console.log("Array lleno: " + arrDecrets);
    	writeLabels(arrDecrets);

  	});


//funciona, si
	function writeLabels(myData){
		svg.selectAll("text")
			.data(dataset)
			.enter()
			.append("text")
			.text(function(d){ return d;})
			.attr("x", function (d,i){return i * w /dataset.length + 5})
			.attr("y", function (d){return h - d * yScale + 15})
			.attr("font-family", "sans-serif")
	   		.attr("font-size", "11px")
	   		.attr("fill", "white");

	   		console.log("Arr en la funci√≥n: " + arrDecrets);
	   		console.log("Dataset?: " + dataset);
		   
	}

	


	</script>
	<br>
	
</body>
</html>